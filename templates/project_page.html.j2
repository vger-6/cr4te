<!DOCTYPE html>
<html lang="en">
<head>
  <style>body { display: none; }</style>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>{{ project.title }}</title>
  <link rel="stylesheet" href="../css/base.css">
  <link rel="stylesheet" href="../css/project.css">
</head>
<body>

<div class="top-link">
  <a href="../index.html">{{ html_settings.nav_creators_label }}</a> &middot;
  <a href="../projects.html">{{ html_settings.nav_projects_label }}</a> &middot;
  <a href="../tags.html">{{ html_settings.nav_tags_label }}</a> &middot;
  <a href="../creators/{{ creator_slug }}.html">{{ creator_name }}</a>
  {% include "_theme_dropdown.html.j2" %}
</div>

<h1>{{ project.title }}</h1>

<div class="project-layout">

  <div class="project-left">

    <div class="section-box">
      <div class="section-title">{{ html_settings.project_page_overview_title }}</div>
      <hr>
      <div class="section-content markdown">
        <div class="project-info project-info--{{ html_settings.project_info_layout }}">
          <img src="{{ thumbnail_url }}" alt="Preview of {{ project.title }}">
          <div>
            {% if 'title' in html_settings.visible_project_fields %}
            <p><strong>Title:</strong> {{ project.title }}</p>
            {% endif %}
            {% if 'release_date' in html_settings.visible_project_fields and project.release_date %}
            <p><strong>Release Date:</strong> {{ project.release_date }}</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>

    {% if info_html %}
    <div class="section-box">
      <div class="section-title">{{ html_settings.project_page_description_title }}</div>
      <hr>
      <div class="section-content text-content">
        {{ info_html | safe }}
      </div>
    </div>
    {% endif %}

    {% if participants %}
    {% for participant in participants %}
    <div class="section-box">
      <div class="section-title">{{ participant.name }} - {{ html_settings.project_page_creator_profile }}</div>
      <hr>
      <div class="section-content">
        <div class="creator-info">
          <img src="{{ participant.portrait_url }}" alt="Portrait of {{ participant.name }}">
          <div>
            <p><strong>Name:</strong> <a href="{{ participant.url }}">{{ participant.name }}</a></p>
            {% if participant.age_at_release %}
            <p><strong>At Age:</strong> {{ participant.age_at_release }}</p>
            {% endif %}
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
    {% endif %}

    {% if tag_map %}
    <div class="section-box">
      <div class="section-title">{{ html_settings.project_page_tags_title }}</div>
      <hr>
      <div class="section-content tag-list">
        {% for category, tags in tag_map.items() %}
        <div class="tag-category">
          <strong>{{ category }}:</strong>
          {% for tag in tags %}
          <a class="tag" href="../index.html?tag={{ tag }}">{{ tag }}</a>
          {% endfor %}
        </div>
        {% endfor %}
      </div>
    </div>
    {% endif %}

  </div>

  <div class="project-right">

    {% for group in media_groups %}
      {% if group.videos %}
      <div class="section-box">
        <div class="section-title">{{ group.video_label }}</div>
        <hr>
        <div class="section-content video-gallery">
          {% for video in group.videos %}
          <video controls>
            <source src="{{ video }}" type="video/mp4">
          </video>
          {% endfor %}
        </div>
      </div>
      {% endif %}

      {% if group.images %}
      <div class="section-box">
        <div class="section-title">{{ group.image_label }}</div>
        <hr>
        <div class="section-content image-gallery">
          {% for row in group.images | batch(4, fill_with=None) %}
              <div class="image-row">
                {% for image in row if image %}
                  <a href="{{ image.full_url }}" target="_blank" class="image-wrapper">
                    <img src="{{ image.thumb_url }}" alt="Image for {{ group.image_label }}" loading="lazy">
                  </a>
                {% endfor %}
              </div>
            {% endfor %}
        </div>
      </div>
      {% endif %}
    {% endfor %}

  </div>

</div>

<script src="../js/theme.js" defer></script>

</body>
</html>

