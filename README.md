# cr4te

> **⚠️ Under Construction**
> This project is still in development. Features, structure, and configuration may change without notice.

A static site generator for organizing and showcasing creative media projects. It scans your folder structure, extracts metadata and media, and builds a clean, searchable HTML gallery using Jinja2 templates.

## Support This Project 🙏

If you find cr4te useful, consider [donating via PayPal](https://www.paypal.com/donate/?hosted_button_id=XERA3ZMTLZC2N) to help support continued development.

---

## Features

* **Automatically builds a gallery website** from your folder structure (e.g. directors and movies)
* **Thumbnail generation** for portraits, posters, and images
* **Tag-based filtering** and search
* **Dedicated overview page for all projects with A-Z filter and tag-aware search**
* **Flexible media grouping via regex rules**
* **Video, audio, image, and document organization with dynamic labels**
* **Build modes (flat, hybrid, deep) for customizable media discovery**
* **HTML label presets for different domains** (artists, musicians, directors, authors, ...)
* **User-customizable labels and media rules** via optional config file
* **Configurable visibility for creator and project metadata fields**
* **Jinja2 templating for fast, maintainable static HTML**
* **Fast static HTML output** with no runtime dependencies during browsing
* **Theme switcher with persistent selection** using localStorage

> This tool is an ongoing work-in-progress. Expect improvements, breaking changes, and new features.

---

## Folder Structure

```
Artists/
├── Alice/
│   ├── cr4te.json           # Optional metadata override
│   ├── README.md            # Optional description
|   ├── profile.jpg          # Detected portrait (via PORTRAIT_RE)
│   └── Project1/
│       ├── cover.jpg        # Detected poster (via POSTER_RE)
│       ├── Landscape1.jpg
│       ├── clip.mp4
│       ├── document.pdf
│       ├── README.md        # Optional project description
│       └── SubGroup/
│           └── *.jpg
│           └── *.m4a
└── Bob & Charlie/           # Collaboration folder
    └── ProjectZ/
```

---

## Installation

```bash
git clone https://github.com/vger-6/cr4te.git
cd cr4te
pip install -r requirements.txt
```

---

## Usage

### Step 1: Build JSON metadata

```bash
python cr4te.py build-json -i /path/to/Artists --mode hybrid
```

Modes available:

* `flat` — Only media directly under the project root
* `hybrid` (default) — Flat .mp4 + first-level .jpg grouping
* `deep` — Find .mp4 and .jpg recursively

Additional options:

* `--max-images` — Set maximum images per media group (overrides config)
* `--image-sample-strategy` — Image selection strategy: `spread` (default), `head`, `all`

> **⚠️ Note**
> cr4te.json files are automatically generated by the build-json command and saved directly into each creator’s original folder (e.g., /path/to/Artists/\*/cr4te.json). These files can be manually edited to override or extend metadata such as birth dates, aliases, tags, or project descriptions.

### Step 2: Generate HTML site

```bash
python cr4te.py build-html -i /path/to/InputFolder -o /path/to/OutputFolder
```

### Optional: Custom Configuration

```bash
python cr4te.py build-html -i /path/to/InputFolder -o /path/to/OutputFolder --config config/cr4te_config.json
```

### Optional: Apply a Label Preset

```bash
python cr4te.py build-html -i /path/to/InputFolder -o /path/to/OutputFolder --html-preset director
```

Available presets:

* `artist` (default)
* `director`
* `author`
* `model`

If `--config` is not specified, cr4te uses internal defaults.

---

## Configuration

Your configuration file should be in JSON format and can override labels and media matching rules:

```json
{
  "html_settings": {
    "nav_creators_label": "Directors",
    "nav_projects_label": "Movies",
    "nav_tags_label": "Tags",

    "overview_page_title": "Directors",
    "overview_page_search_placeholder": "Search directors, movies, tags...",
    "project_overview_page_title": "Movies",
    "project_overview_page_search_placeholder": "Search movies, tags...",

    "creator_page_profile_title": "Profile",
    "creator_page_about_title": "About",
    "creator_page_tags_title": "Tags",
    "creator_page_projects_title": "Movies",
    "creator_page_collabs_title_prefix": "Codirected with",

    "collaboration_page_profile_title": "Profile",
    "collaboration_page_about_title": "About",
    "collaboration_page_tags_title": "Tags",
    "collaboration_page_members_title": "Members",
    "collaboration_page_projects_title": "Movies",

    "project_page_overview_title": "Overview",
    "project_page_description_title": "Description",
    "project_page_tags_title": "Tags",
    "project_page_creator_profile": "Profile",
    "project_page_videos_label": "Videos",
    "project_page_audio_label": "Audio",
    "project_page_images_label": "Images",
    "project_page_documents_label": "Documents",
    
    "tags_page_title": "Tags",
    
    "visible_creator_fields": ["date_of_birth", "nationality", "aliases", "debut_age"],
    "visible_project_fields": ["title", "release_date"],
    
    "project_info_layout": "column"
  },
  "media_rules": {
    "GLOBAL_EXCLUDE_RE": "(^|/|\\\\)_",

    "VIDEO_INCLUDE_RE": ".*\\.mp4$",
    "VIDEO_EXCLUDE_RE": "$^",
    "AUDIO_INCLUDE_RE": ".*\\.m4a$",
    "AUDIO_EXCLUDE_RE": "$^",
    "IMAGE_INCLUDE_RE": ".*\\.jpg$",
    "IMAGE_EXCLUDE_RE": "$^",
    "DOCUMENT_INCLUDE_RE": ".*\\.pdf$",
    "DOCUMENT_EXCLUDE_RE": "$^",

    "PORTRAIT_RE": "^profile\\.jpg$",
    "POSTER_RE": "^cover\\.jpg$",

    "MAX_IMAGES": 20,
    "IMAGE_SAMPLE_STRATEGY": "spread",

    "COLLABORATION_SEPARATOR": " & "
  }
}
```

### Special Rules

* `PORTRAIT_RE`: Regex used to identify a portrait image (default: `^profile\.jpg$`)
* `POSTER_RE`: Regex used to identify a project's poster image (default: `^cover\.jpg$`)
* `IMAGE_SAMPLE_STRATEGY`: Sampling strategy for gallery thumbnails

  * `spread` (default): even sampling throughout the list
  * `head`: take the first N images
  * `all`: take all images
* `visible_creator_fields`: Controls which creator attributes (e.g., `aliases`, `nationality`) are shown
* `visible_project_fields`: Controls which project attributes (e.g., `release_date`) are shown
* `project_info_layout`: Controls layout of the project overview section
  * `column` (default): stacks image above text
  * `row`: places them side by side

---

## Creator Metadata: `cr4te.json`

Each creator folder can contain a `cr4te.json` file to override or extend metadata.
This file is automatically generated but can also be edited by hand.

### Example:

```json
{
  "name": "Alice",
  "is_collaboration": false,
  "date_of_birth": "1974-10-23",
  "nationality": "American",
  "aliases": [],
  "portrait": "Alice/portrait.jpg",
  "info": "Alice is a photographer known for...",
  "tags": ["Occupation:Photographer"],
  "projects": [
    {
      "title": "Old Houses",
      "release_date": "2000-07-13",
      "thumbnail": "Alice/Old Houses/cover.jpg",
      "info": "Old Houses explores aging architecture...",
      "image_count": 12,
      "video_count": 0,
      "audio_count": 0,
      "media_groups": [
        {
          "is_root": true,
          "videos": [],
          "audio": [],
          "images": [
            "Alice/Old Houses/003.jpg",
            "Alice/Old Houses/005.jpg",
            "Alice/Old Houses/010.jpg"
          ],
          "featured_images": [],
          "documents": [],
          "folder_name": "."
        }
      ],
      "tags": ["Genre:Buildings"]
    }
  ],
  "members": [],
  "collaborations": []
}
```

### Editable Fields

* `date_of_birth`: Must be in `YYYY-MM-DD` format
* `nationality`: Any free-form text
* `aliases`: List of alternate names
* `portrait`: Relative path to the portrait image
* `info`: Optional bio text (supports Markdown)
* `tags`: Format should be `Category:Tag`, e.g. `Occupation:Photographer`
* `projects[*].info`: Optional per-project description
* `projects[*].tags`: Tag list for each project
* `images`: List of auto detected image files
* `featured_images`: Curated list of image files (displayed first)
* `members`: If this is a group folder, add member names
* `collaborations`: Add collaboration names

---

## Output Example

* `index.html` — Overview page
* `projects.html` — Projects overview page
* `creators/<creator>.html` — Individual profile pages
* `projects/<project>.html` — Individual project pages
* `tags.html` — Browse by tags

Thumbnails are automatically generated into `/thumbnails/`.

---

## Requirements

* Python 3.10+
* Pillow
* Markdown
* Jinja2

Install dependencies:

```bash
pip install -r requirements.txt
```

---

## Troubleshooting

### LocalStorage not working under `file://`

Some browsers (notably Firefox with strict settings) block `localStorage` access across pages loaded with the `file://` protocol.

**Solution:** run a lightweight local server from your output folder:

```bash
cd /path/to/OutputFolder
python3 -m http.server 8000
```

Then open `http://localhost:8000/` in your browser.

This will fix localStorage issues and better match how your site behaves when deployed online.

---

## License

This project is licensed under the terms of the LICENSE file included.

---

## Credits

Created for artists, curators, media historians, and creative developers who want simple but structured control over their digital media archives.

> Development is ongoing. Feedback, ideas, and contributions are very welcome!

